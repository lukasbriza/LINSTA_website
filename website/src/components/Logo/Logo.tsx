import styles from '../../styles/modules/Logo.module.scss'

import * as React from "react"
import clsx from 'clsx'
import { initialAnimation } from './animations'
import { useDisableScroll } from '@hooks'
import { SVGProps, forwardRef, useRef, useImperativeHandle, useEffect, useState } from "react"

type LogoProps = {
}

export type ImperativeReference = {
    initialAnimation: () => void
}

export const Logo = forwardRef<ImperativeReference, LogoProps & SVGProps<SVGSVGElement>>((props, ref) => {
    const [, setDisabled] = useDisableScroll()
    const round = useRef<SVGPathElement>(null)
    const downPath = useRef<SVGPathElement>(null)
    const upPath = useRef<SVGPathElement>(null)
    const svgContainer = useRef<HTMLDivElement>(null)
    const svgRoot = useRef<SVGSVGElement>(null)
    const layer = useRef<HTMLDivElement>(null)
    const text = useRef<SVGPathElement>(null)

    const [animated, setAnimated] = useState<boolean>(false)

    useEffect(() => {
        animated ? setDisabled(false) : setDisabled(true)
    }, [animated, setDisabled])

    useImperativeHandle(ref, () => ({
        initialAnimation: () => {
            round.current &&
                downPath.current &&
                upPath.current &&
                svgRoot.current &&
                svgContainer.current &&
                text.current &&
                layer.current &&
                initialAnimation(
                    round.current,
                    downPath.current,
                    upPath.current,
                    svgRoot.current,
                    svgContainer.current,
                    text.current,
                    layer.current,
                    setAnimated
                )
        }
    }), [])

    return (
        <>
            {!animated && <div className={clsx([!animated && styles.layer])} ref={layer}></div>}
            <div className={clsx([!animated && styles.intialAnState, styles.svgContainer])} ref={svgContainer}>
                <svg
                    className={styles.svgRoot}
                    viewBox="0 0 460 95"
                    preserveAspectRatio="xMinYMin meet"
                    fill="none"
                    ref={svgRoot}
                    xmlns="http://www.w3.org/2000/svg"
                    {...props}
                >
                    <path
                        ref={round}
                        d="M45.094 94.422c24.905 0 45.094-21.137 45.094-47.21C90.188 21.136 69.998 0 45.094 0 20.189 0 0 21.137 0 47.211c0 26.074 20.19 47.211 45.094 47.211Z"
                        fill={"#E35F21"}
                    />
                    <path
                        style={{ display: 'none', opacity: 0 }}
                        ref={text}
                        d="M111.992 57.61V31.849h4.341v21.85h10.553v3.911h-14.894Zm23.002-25.761V57.61h-4.34V31.849h4.34Zm24.393 0V57.61h-3.862l-11.291-17.547h-.198V57.61h-4.341V31.849h3.884l11.28 17.56h.209v-17.56h4.319Zm17.751 7.082c-.109-1.099-.569-1.954-1.38-2.566-.804-.612-1.85-.918-3.136-.918-.905 0-1.681.146-2.328.44-.648.293-1.143.691-1.487 1.195a3.056 3.056 0 0 0-.526 1.723c0 .537.113 1.002.339 1.396.234.394.551.73.949 1.007.397.268.837.494 1.321.679.484.184.971.34 1.463.465l2.246.604c.905.226 1.775.532 2.609.918a9.123 9.123 0 0 1 2.259 1.46 6.421 6.421 0 0 1 1.591 2.125c.389.83.585 1.803.585 2.918 0 1.51-.359 2.839-1.077 3.988-.718 1.14-1.754 2.033-3.112 2.679-1.35.637-2.983.956-4.902.956-1.864 0-3.483-.31-4.855-.93-1.365-.621-2.435-1.527-3.207-2.718-.764-1.19-1.178-2.641-1.24-4.352h4.271c.063.897.319 1.644.772 2.239a4.108 4.108 0 0 0 1.766 1.333c.733.294 1.552.44 2.457.44.944 0 1.771-.15 2.481-.452.718-.31 1.279-.738 1.685-1.283.406-.554.612-1.2.62-1.937-.008-.671-.191-1.225-.55-1.66-.358-.445-.862-.814-1.509-1.108-.64-.302-1.389-.57-2.247-.805l-2.726-.755c-1.973-.544-3.534-1.37-4.68-2.477-1.139-1.116-1.708-2.596-1.708-4.44 0-1.518.382-2.848 1.147-3.988.772-1.14 1.82-2.025 3.146-2.654 1.327-.638 2.828-.956 4.505-.956 1.701 0 3.191.319 4.47.956 1.287.629 2.297 1.505 3.03 2.629.733 1.115 1.112 2.398 1.136 3.849h-4.178Zm7.322-3.17v-3.912h19.118v3.912h-7.407V57.61h-4.305V35.76h-7.406Zm22.984 21.849h-4.632l8.435-25.761h5.359l8.447 25.761h-4.633l-6.4-20.478h-.188l-6.388 20.478Zm.152-10.1h12.637v3.748h-12.637v-3.749Zm42.802-4.114-3.86.453c-.11-.42-.3-.813-.573-1.182a2.896 2.896 0 0 0-1.077-.893c-.453-.227-1.006-.34-1.662-.34-.881 0-1.622.205-2.222.616-.593.411-.886.944-.878 1.598-.008.562.183 1.019.573 1.37.398.353 1.053.642 1.966.869l3.065.704c1.701.394 2.965 1.019 3.791 1.874.835.856 1.256 1.975 1.263 3.359-.007 1.216-.339 2.29-.994 3.22-.647.922-1.549 1.644-2.703 2.164-1.154.52-2.48.78-3.978.78-2.2 0-3.97-.495-5.312-1.485-1.341-.998-2.14-2.386-2.398-4.163l4.13-.428c.187.872.585 1.53 1.193 1.975.609.444 1.401.666 2.375.666 1.007 0 1.814-.222 2.423-.666.615-.445.923-.994.923-1.648 0-.553-.198-1.01-.596-1.371-.39-.36-.998-.637-1.825-.83l-3.065-.692c-1.724-.386-3-1.036-3.827-1.95-.826-.922-1.236-2.088-1.229-3.497-.007-1.19.293-2.222.902-3.094.616-.88 1.471-1.56 2.563-2.038 1.099-.486 2.366-.73 3.802-.73 2.106 0 3.764.483 4.972 1.447 1.217.965 1.97 2.269 2.258 3.912Zm12.853-5.107v3.522H252.92V38.29h10.331Zm-7.781-4.629h4.236V51.8c0 .612.086 1.081.258 1.409.179.318.413.536.701.654.288.117.608.176.96.176.265 0 .506-.021.725-.063a5.95 5.95 0 0 0 .515-.113l.714 3.56c-.226.083-.55.175-.971.276-.414.1-.92.16-1.522.176-1.06.034-2.015-.138-2.866-.516a4.546 4.546 0 0 1-2.024-1.786c-.492-.805-.733-1.811-.726-3.019V33.66ZM271.965 58c-1.139 0-2.165-.218-3.077-.654a5.142 5.142 0 0 1-2.154-1.962c-.522-.864-.783-1.93-.783-3.195 0-1.09.187-1.992.561-2.705a4.542 4.542 0 0 1 1.533-1.71 7.442 7.442 0 0 1 2.188-.97c.819-.225 1.665-.389 2.539-.49a92.837 92.837 0 0 0 2.562-.314c.655-.1 1.132-.252 1.428-.453.304-.21.456-.532.456-.968v-.076c0-.947-.262-1.681-.784-2.201-.523-.52-1.276-.78-2.258-.78-1.038 0-1.86.243-2.469.73-.6.486-1.006 1.06-1.217 1.723l-3.954-.604c.311-1.174.827-2.155 1.545-2.943a6.666 6.666 0 0 1 2.632-1.787c1.038-.402 2.184-.603 3.439-.603.866 0 1.728.109 2.587.327a7.016 7.016 0 0 1 2.351 1.081c.709.495 1.279 1.17 1.708 2.026.437.855.656 1.924.656 3.207V57.61h-4.072v-2.654h-.141a5.54 5.54 0 0 1-1.088 1.51c-.46.46-1.04.834-1.743 1.119-.694.277-1.51.415-2.445.415Zm1.099-3.346c.851 0 1.587-.18 2.212-.54a3.845 3.845 0 0 0 1.439-1.46 3.929 3.929 0 0 0 .514-1.975v-2.277c-.131.118-.358.227-.677.328a9.16 9.16 0 0 1-1.053.264c-.391.075-.777.142-1.16.2-.382.06-.713.11-.994.152a6.989 6.989 0 0 0-1.697.453c-.499.21-.893.503-1.181.88-.288.37-.433.847-.433 1.434 0 .839.285 1.472.854 1.9.57.427 1.295.641 2.176.641Zm28.057-16.365-6.4 19.321h-4.68l-6.4-19.32h4.516l4.131 14.352h.187l4.142-14.353h4.504Zm10.276 19.698c-1.801 0-3.358-.402-4.669-1.207-1.303-.814-2.304-1.962-3.006-3.447-.702-1.492-1.054-3.25-1.054-5.27 0-1.988.352-3.732 1.054-5.233.709-1.51 1.7-2.683 2.972-3.522 1.271-.847 2.765-1.27 4.481-1.27 1.107 0 2.152.193 3.136.578a7.03 7.03 0 0 1 2.62 1.761c.765.797 1.365 1.812 1.802 3.044.436 1.225.655 2.684.655 4.378v1.396h-14.73v-3.07h10.671c-.009-.871-.184-1.647-.528-2.326a3.99 3.99 0 0 0-1.439-1.623c-.608-.394-1.318-.591-2.128-.591-.866 0-1.627.226-2.282.68a4.568 4.568 0 0 0-1.533 1.76 5.36 5.36 0 0 0-.55 2.378v2.679c0 1.123.191 2.088.573 2.893.383.796.917 1.409 1.603 1.836.687.42 1.49.63 2.411.63.615 0 1.173-.093 1.672-.278.5-.192.933-.473 1.299-.842.367-.37.644-.826.831-1.371l3.955.478c-.25 1.123-.726 2.105-1.428 2.943-.694.83-1.583 1.476-2.667 1.937-1.085.453-2.325.68-3.721.68Zm11.761-.377V31.849h4.236v9.635h.176c.217-.47.526-.968.923-1.497.398-.536.937-.993 1.615-1.37.679-.386 1.545-.58 2.598-.58 1.388 0 2.64.382 3.756 1.145 1.123.755 2.012 1.874 2.668 3.359.662 1.476.994 3.287.994 5.434 0 2.121-.324 3.924-.971 5.409-.648 1.484-1.53 2.616-2.645 3.396-1.116.78-2.378 1.17-3.79 1.17-1.03 0-1.884-.185-2.563-.554-.678-.369-1.224-.813-1.638-1.333a8.652 8.652 0 0 1-.947-1.497h-.246v3.044h-4.166Zm4.154-9.66c0 1.25.164 2.343.492 3.283.335.939.814 1.673 1.439 2.2.632.52 1.396.78 2.293.78.936 0 1.72-.267 2.351-.804.632-.545 1.108-1.287 1.428-2.227.328-.947.492-2.025.492-3.232 0-1.2-.16-2.265-.481-3.195-.32-.931-.795-1.66-1.427-2.189-.632-.528-1.419-.792-2.363-.792-.905 0-1.673.255-2.305.767-.632.511-1.112 1.228-1.439 2.15-.32.923-.48 2.01-.48 3.259Zm20.648-1.66v11.32h-4.235V38.29h4.047v3.282h.211c.413-1.081 1.073-1.941 1.978-2.578.912-.638 2.039-.956 3.381-.956 1.24 0 2.32.285 3.24.855.929.57 1.647 1.396 2.154 2.478.514 1.082.768 2.394.76 3.937V57.61h-4.235V46.013c0-1.292-.312-2.302-.937-3.032-.615-.73-1.469-1.094-2.561-1.094-.742 0-1.401.176-1.978.528-.569.344-1.018.843-1.345 1.497-.32.654-.48 1.447-.48 2.377Zm15.841 11.32V38.29h4.237v19.32h-4.237Zm.504-21.862L366.926 30h4.141l-3.592 5.748h-3.17Zm30.464 7.648-3.861.453c-.11-.42-.3-.813-.573-1.182a2.88 2.88 0 0 0-1.077-.893c-.452-.227-1.006-.34-1.661-.34-.882 0-1.623.205-2.223.616-.593.411-.885.944-.878 1.598-.007.562.184 1.019.574 1.37.398.353 1.052.642 1.965.869l3.066.704c1.7.394 2.964 1.019 3.791 1.874.834.856 1.255 1.975 1.264 3.359-.009 1.216-.34 2.29-.996 3.22-.647.922-1.547 1.644-2.702 2.164-1.155.52-2.48.78-3.978.78-2.199 0-3.97-.495-5.312-1.485-1.342-.998-2.141-2.386-2.399-4.163l4.13-.428c.187.872.585 1.53 1.194 1.975.608.444 1.4.666 2.375.666 1.006 0 1.814-.222 2.422-.666.617-.445.925-.994.925-1.648 0-.553-.199-1.01-.597-1.371-.39-.36-.999-.637-1.826-.83l-3.065-.692c-1.724-.386-2.999-1.036-3.826-1.95-.827-.922-1.236-2.088-1.228-3.497-.008-1.19.292-2.222.9-3.094.617-.88 1.471-1.56 2.563-2.038 1.1-.486 2.367-.73 3.803-.73 2.105 0 3.763.483 4.971 1.447 1.218.965 1.97 2.269 2.259 3.912Zm6.488 14.49c-.71 0-1.318-.268-1.825-.804-.507-.537-.757-1.191-.75-1.962-.007-.755.243-1.4.75-1.938.507-.536 1.115-.805 1.825-.805.686 0 1.282.269 1.79.805.515.537.776 1.183.783 1.938a2.823 2.823 0 0 1-.374 1.396c-.234.419-.546.754-.935 1.006a2.31 2.31 0 0 1-1.264.365Zm6.947-.276V38.29h4.107v3.22h.187c.327-1.116.889-1.975 1.685-2.58a4.41 4.41 0 0 1 2.749-.917c.234 0 .495.012.784.037.296.017.542.046.737.088v4.189c-.18-.067-.464-.126-.854-.176a7.333 7.333 0 0 0-1.112-.088c-.772 0-1.466.18-2.082.54a3.814 3.814 0 0 0-1.439 1.472c-.352.63-.527 1.355-.527 2.176V57.61h-4.235Zm13.613.277c-.71 0-1.319-.269-1.826-.805-.506-.537-.757-1.191-.748-1.962-.009-.755.242-1.4.748-1.938.507-.536 1.116-.805 1.826-.805.686 0 1.283.269 1.79.805a2.75 2.75 0 0 1 .784 1.938 2.855 2.855 0 0 1-.374 1.396 2.8 2.8 0 0 1-.937 1.006 2.301 2.301 0 0 1-1.263.365Zm14.785.1c-1.754 0-3.275-.415-4.563-1.245-1.286-.83-2.285-1.991-2.994-3.484-.703-1.493-1.054-3.237-1.054-5.233 0-1.996.351-3.744 1.054-5.245.709-1.501 1.708-2.667 2.994-3.497 1.288-.83 2.809-1.245 4.563-1.245 1.756 0 3.276.415 4.564 1.245 1.287.83 2.281 1.996 2.984 3.497.709 1.5 1.064 3.25 1.064 5.245 0 1.996-.355 3.74-1.064 5.233-.703 1.492-1.697 2.654-2.984 3.484-1.288.83-2.808 1.245-4.564 1.245Zm.024-3.647c.952 0 1.747-.281 2.388-.843.638-.57 1.115-1.334 1.427-2.29.319-.955.479-2.02.479-3.194 0-1.183-.16-2.252-.479-3.208-.312-.964-.789-1.732-1.427-2.302-.641-.57-1.436-.855-2.388-.855-.974 0-1.786.285-2.433.855-.641.57-1.119 1.338-1.44 2.302-.311.956-.468 2.025-.468 3.208 0 1.174.157 2.239.468 3.195.321.955.799 1.719 1.44 2.289.647.562 1.459.843 2.433.843Zm14.792 3.547c-.709 0-1.318-.269-1.825-.805-.507-.537-.756-1.191-.749-1.962-.007-.755.242-1.4.749-1.938.507-.536 1.116-.805 1.825-.805.686 0 1.283.269 1.79.805.515.537.777 1.183.784 1.938a2.813 2.813 0 0 1-.375 1.396c-.234.419-.545.754-.935 1.006a2.307 2.307 0 0 1-1.264.365ZM100.992 81.5v-70a1.5 1.5 0 0 0-3 0v70a1.5 1.5 0 0 0 3 0Z"
                        fill={"#414141"}
                    />
                    <path
                        ref={downPath}
                        stroke="white"
                        fill="white"
                        d="M31.2483 58.9424H53.0148C54.8939 58.9424 56.6301 59.8878 57.5699 61.4222C58.5097 62.9565 58.5097 64.8474 57.5699 66.3817C56.6302 67.9161 54.8939 68.8615 53.0148 68.8615H31.2483C29.3692 68.8615 27.6325 67.9161 26.6931 66.3817C25.7534 64.8474 25.7534 62.9565 26.6931 61.4222C27.6324 59.8878 29.3692 58.9424 31.2483 58.9424Z"
                    />
                    <path
                        ref={upPath}
                        stroke="white"
                        fill="white"
                        d="M23.7389 46.3166H34.8394L35.2077 42.3478C35.2843 41.4802 35.6939 40.6728 36.3543 40.0855C37.0152 39.4978 37.8791 39.1736 38.7748 39.1768H39.3535V32.4867C39.3535 31.504 39.7542 30.5609 40.4682 29.8645C41.1822 29.1686 42.1512 28.7763 43.1621 28.7736C43.4171 28.7745 43.6713 28.8019 43.9197 28.8553L59.2601 19.8643L59.6284 19.6496C60.2503 19.2861 60.9948 19.1752 61.6999 19.3419C62.4055 19.5085 63.0147 19.9387 63.3957 20.5392V20.6109C63.5023 20.7424 63.5972 20.883 63.6794 21.0301L76.8745 48.4744C77.6298 48.9115 78.2339 49.5576 78.6092 50.3303C78.9841 51.103 79.1128 51.9674 78.9789 52.8118C78.7534 54.2544 77.8135 55.4974 76.464 56.1363C75.8369 56.4409 75.145 56.5984 74.4441 56.5966H74.0336L69.0671 56.1669C68.65 56.1308 68.2949 55.8578 68.1624 55.4714C68.03 55.0851 68.1455 54.6595 68.457 54.3873L72.7184 50.6537L59.4608 25.9706L46.9716 33.2944V39.176H47.2872C48.237 39.176 49.1483 39.5423 49.8204 40.1944C50.4931 40.8465 50.8726 41.7311 50.8754 42.6544V56.5659C50.8754 56.8372 50.7646 57.0975 50.5673 57.2893C50.3695 57.4811 50.1022 57.5889 49.8232 57.5889H19.0571C18.7781 57.5889 18.5104 57.4811 18.3131 57.2893C18.1158 57.0975 18.0049 56.8372 18.0049 56.5659V51.8912C18.0077 50.4134 18.6128 48.9969 19.6875 47.9521C20.7622 46.9073 22.2189 46.3193 23.7389 46.3166Z"
                    />
                </svg>
            </div>
        </>

    )
})

Logo.displayName = 'Logo'